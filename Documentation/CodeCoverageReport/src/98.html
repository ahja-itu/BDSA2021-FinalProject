<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\andre\Source\School\BDSA2021-FinalProject\WebService.Infrastructure.Tests\ContextRepositoryTests\LevelRepositoryTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
// ***********************************************************************
// Assembly         : WebService.Infrastructure.Tests
// Author           : Group BTG
// Created          : 11-29-2021
//
// Last Modified By : Group BTG
// Last Modified On : 12-14-2021
// ***********************************************************************
// &lt;copyright file=&quot;LevelRepositoryTests.cs&quot; company=&quot;BTG&quot;&gt;
//     Copyright (c) . All rights reserved.
// &lt;/copyright&gt;
// &lt;summary&gt;&lt;/summary&gt;
// ***********************************************************************

using System.Diagnostics.CodeAnalysis;

namespace WebService.Infrastructure.Tests.ContextRepositoryTests;

/// &lt;summary&gt;
///     Class LevelRepositoryTests.
/// &lt;/summary&gt;
[SuppressMessage(&quot;ReSharper&quot;, &quot;StringLiteralTypo&quot;)]
public class LevelRepositoryTests
{
    /// &lt;summary&gt;
    ///     The v
    /// &lt;/summary&gt;
    private readonly TestVariables _v;

    /// &lt;summary&gt;
    ///     Initializes a new instance of the &lt;see cref=&quot;LevelRepositoryTests&quot; /&gt; class.
    /// &lt;/summary&gt;
    public LevelRepositoryTests()
    {
        _v = new TestVariables();
    }

    #region Create

    /// &lt;summary&gt;
    ///     Defines the test method CreateAsync_level_returns_new_level_with_id.
    /// &lt;/summary&gt;
    [Fact]
    public async Task CreateAsync_level_returns_new_level_with_id()
    {
        var level = new CreateLevelDTO(&quot;Highschool&quot;);

        var actual = await _v.LevelRepository.CreateAsync(level);

        var expected = (Status.Created, new LevelDTO(4, &quot;Highschool&quot;));

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method CreateAsync_level_returns_conflict_and_existing_level.
    /// &lt;/summary&gt;
    [Fact]
    public async Task CreateAsync_level_returns_conflict_and_existing_level()
    {
        var level = new CreateLevelDTO(&quot;PHD&quot;);

        var actual = await _v.LevelRepository.CreateAsync(level);

        var expected = (Status.Conflict, new LevelDTO(3, &quot;PHD&quot;));

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method CreateAsync_level_returns_count_one_more.
    /// &lt;/summary&gt;
    [Fact]
    public async Task CreateAsync_level_returns_count_one_more()
    {
        var level = new CreateLevelDTO(&quot;Highschool&quot;);

        await _v.LevelRepository.CreateAsync(level);

        var actual = _v.LevelRepository.ReadAsync().Result.Count;

        const int expected = 4;

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method CreateAsync_level_returns_bad_request_on_name_tooLong.
    /// &lt;/summary&gt;
    [Fact]
    public async Task CreateAsync_level_returns_bad_request_on_name_tooLong()
    {
        var level = new CreateLevelDTO(&quot;asseocarnisanguineoviscericartilaginonervomedullary&quot;);

        var actual = await _v.LevelRepository.CreateAsync(level);

        var expected = (Status.BadRequest, new LevelDTO(-1, &quot;asseocarnisanguineoviscericartilaginonervomedullary&quot;));

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method CreateAsync_level_returns_bad_request_on_name_empty.
    /// &lt;/summary&gt;
    [Fact]
    public async Task CreateAsync_level_returns_bad_request_on_name_empty()
    {
        var level = new CreateLevelDTO(&quot;&quot;);

        var actual = await _v.LevelRepository.CreateAsync(level);

        var expected = (Status.BadRequest, new LevelDTO(-1, &quot;&quot;));

        Assert.Equal(expected, actual);
    }


    /// &lt;summary&gt;
    ///     Defines the test method CreateAsync_level_returns_bad_request_on_name_whitespace.
    /// &lt;/summary&gt;
    [Fact]
    public async Task CreateAsync_level_returns_bad_request_on_name_whitespace()
    {
        var level = new CreateLevelDTO(&quot; &quot;);

        var actual = await _v.LevelRepository.CreateAsync(level);

        var expected = (Status.BadRequest, new LevelDTO(-1, &quot; &quot;));

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method CreateAsync_level_with_max_length_returns_new_language_with_id.
    /// &lt;/summary&gt;
    [Fact]
    public async Task CreateAsync_level_with_max_length_returns_new_language_with_id()
    {
        var level = new CreateLevelDTO(&quot;asseocarnisanguineoviscericartilaginonervomedullar&quot;);

        var actual = await _v.LevelRepository.CreateAsync(level);

        var expected = (Status.Created, new LevelDTO(4, &quot;asseocarnisanguineoviscericartilaginonervomedullar&quot;));

        Assert.Equal(expected, actual);
    }

    #endregion

    #region Read

    /// &lt;summary&gt;
    ///     Defines the test method ReadAsync_level_by_id_returns_level_and_status_found.
    /// &lt;/summary&gt;
    [Fact]
    public async Task ReadAsync_level_by_id_returns_level_and_status_found()
    {
        var actual = await _v.LevelRepository.ReadAsync(1);

        var expected = (Status.Found, new LevelDTO(1, &quot;Bachelor&quot;));

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method ReadAsync_level_by_id_returns_empty_level_and_status_notFound.
    /// &lt;/summary&gt;
    [Fact]
    public async Task ReadAsync_level_by_id_returns_empty_level_and_status_notFound()
    {
        var actual = await _v.LevelRepository.ReadAsync(4);

        var expected = (Status.NotFound, new LevelDTO(-1, &quot;&quot;));

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method ReadAllAsync_returns_all_levels.
    /// &lt;/summary&gt;
    [Fact]
    public async Task ReadAllAsync_returns_all_levels()
    {
        var actual = await _v.LevelRepository.ReadAsync();

        var expected1 = new LevelDTO(1, &quot;Bachelor&quot;);
        var expected2 = new LevelDTO(2, &quot;Master&quot;);
        var expected3 = new LevelDTO(3, &quot;PHD&quot;);

        Assert.Collection(actual,
            levelDTO =&gt; Assert.Equal(expected1, levelDTO),
            levelDTO =&gt; Assert.Equal(expected2, levelDTO),
            levelDTO =&gt; Assert.Equal(expected3, levelDTO));
    }

    #endregion

    #region Delete

    /// &lt;summary&gt;
    ///     Defines the test method DeleteAsync_level_by_id_returns_status_deleted.
    /// &lt;/summary&gt;
    [Fact]
    public async Task DeleteAsync_level_by_id_returns_status_deleted()
    {
        var actual = await _v.LevelRepository.DeleteAsync(1);

        const Status expected = Status.Deleted;

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method DeleteAsync_level_by_id_returns_status_notFound.
    /// &lt;/summary&gt;
    [Fact]
    public async Task DeleteAsync_level_by_id_returns_status_notFound()
    {
        var actual = await _v.LevelRepository.DeleteAsync(4);

        const Status expected = Status.NotFound;

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method DeleteAsync_level_by_id_returns_count_one_less.
    /// &lt;/summary&gt;
    [Fact]
    public async Task DeleteAsync_level_by_id_returns_count_one_less()
    {
        await _v.LevelRepository.DeleteAsync(3);

        var actual = _v.LevelRepository.ReadAsync().Result.Count;

        const int expected = 2;

        Assert.Equal(expected, actual);
    }

    #endregion

    #region Update

    /// &lt;summary&gt;
    ///     Defines the test method UpdateAsync_level_by_id_returns_status_updated.
    /// &lt;/summary&gt;
    [Fact]
    public async Task UpdateAsync_level_by_id_returns_status_updated()
    {
        var updateLevelDTO = new LevelDTO(3, &quot;Highschool&quot;);

        var actual = await _v.LevelRepository.UpdateAsync(updateLevelDTO);

        const Status expected = Status.Updated;

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method UpdateAsync_level_by_id_read_updated_returns_status_found_and_updated_level.
    /// &lt;/summary&gt;
    [Fact]
    public async Task UpdateAsync_level_by_id_read_updated_returns_status_found_and_updated_level()
    {
        var updateLevelDTO = new LevelDTO(3, &quot;Highschool&quot;);

        await _v.LevelRepository.UpdateAsync(updateLevelDTO);

        var actual = await _v.LevelRepository.ReadAsync(3);

        var expected = (Status.Found, updateLevelDTO);

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method UpdateAsync_level_by_id_returns_status_notFound.
    /// &lt;/summary&gt;
    [Fact]
    public async Task UpdateAsync_level_by_id_returns_status_notFound()
    {
        var updateLevelDTO = new LevelDTO(4, &quot;Highscool&quot;);

        var actual = await _v.LevelRepository.UpdateAsync(updateLevelDTO);

        const Status expected = Status.NotFound;

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method UpdateAsync_level_by_id_returns_status_conflict.
    /// &lt;/summary&gt;
    [Fact]
    public async Task UpdateAsync_level_by_id_returns_status_conflict()
    {
        var updateLevelDTO = new LevelDTO(3, &quot;Bachelor&quot;);

        var actual = await _v.LevelRepository.UpdateAsync(updateLevelDTO);

        const Status expected = Status.Conflict;

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method UpdateAsync_level_returns_bad_request_on_name_tooLong.
    /// &lt;/summary&gt;
    [Fact]
    public async Task UpdateAsync_level_returns_bad_request_on_name_tooLong()
    {
        var level = new LevelDTO(1, &quot;asseocarnisanguineoviscericartilaginonervomedullary&quot;);

        var actual = await _v.LevelRepository.UpdateAsync(level);

        const Status expected = Status.BadRequest;

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method UpdateAsync_level_returns_bad_request_on_name_empty.
    /// &lt;/summary&gt;
    [Fact]
    public async Task UpdateAsync_level_returns_bad_request_on_name_empty()
    {
        var level = new LevelDTO(1, &quot;&quot;);

        var actual = await _v.LevelRepository.UpdateAsync(level);

        const Status expected = Status.BadRequest;

        Assert.Equal(expected, actual);
    }


    /// &lt;summary&gt;
    ///     Defines the test method UpdateAsync_level_returns_bad_request_on_name_whitespace.
    /// &lt;/summary&gt;
    [Fact]
    public async Task UpdateAsync_level_returns_bad_request_on_name_whitespace()
    {
        var level = new LevelDTO(1, &quot; &quot;);

        var actual = await _v.LevelRepository.UpdateAsync(level);

        const Status expected = Status.BadRequest;

        Assert.Equal(expected, actual);
    }

    /// &lt;summary&gt;
    ///     Defines the test method UpdateAsync_level_with_max_length_returns_updated.
    /// &lt;/summary&gt;
    [Fact]
    public async Task UpdateAsync_level_with_max_length_returns_updated()
    {
        var level = new LevelDTO(1, &quot;asseocarnisanguineoviscericartilaginonervomedullar&quot;);

        var actual = await _v.LevelRepository.UpdateAsync(level);

        const Status expected = Status.Updated;

        Assert.Equal(expected, actual);
    }

    #endregion
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[33,5,33,34,1],[34,5,34,6,1],[35,9,35,34,1],[36,5,36,6,1],[45,5,45,6,1],[46,9,46,54,1],[48,9,48,66,1],[50,9,50,72,1],[52,9,52,40,1],[53,5,53,6,1],[60,5,60,6,1],[61,9,61,47,1],[63,9,63,66,1],[65,9,65,66,1],[67,9,67,40,1],[68,5,68,6,1],[75,5,75,6,1],[76,9,76,54,1],[78,9,78,53,1],[80,9,80,66,1],[84,9,84,40,1],[85,5,85,6,1],[92,5,92,6,1],[93,9,93,95,1],[95,9,95,66,1],[97,9,97,117,1],[99,9,99,40,1],[100,5,100,6,1],[107,5,107,6,1],[108,9,108,44,1],[110,9,110,66,1],[112,9,112,66,1],[114,9,114,40,1],[115,5,115,6,1],[123,5,123,6,1],[124,9,124,45,1],[126,9,126,66,1],[128,9,128,67,1],[130,9,130,40,1],[131,5,131,6,1],[138,5,138,6,1],[139,9,139,94,1],[141,9,141,66,1],[143,9,143,112,1],[145,9,145,40,1],[146,5,146,6,1],[157,5,157,6,1],[158,9,158,60,1],[160,9,160,68,1],[162,9,162,40,1],[163,5,163,6,1],[170,5,170,6,1],[171,9,171,60,1],[173,9,173,64,1],[175,9,175,40,1],[176,5,176,6,1],[183,5,183,6,1],[184,9,184,59,1],[186,9,186,53,1],[187,9,187,51,1],[188,9,188,48,1],[190,9,191,25,1],[191,25,191,58,1],[191,58,192,25,1],[192,25,192,58,1],[192,58,193,25,1],[193,25,193,58,1],[193,58,193,60,1],[194,5,194,6,1],[205,5,205,6,1],[206,9,206,62,1],[210,9,210,40,1],[211,5,211,6,1],[218,5,218,6,1],[219,9,219,62,1],[223,9,223,40,1],[224,5,224,6,1],[231,5,231,6,1],[232,9,232,49,1],[234,9,234,66,1],[238,9,238,40,1],[239,5,239,6,1],[250,5,250,6,1],[251,9,251,60,1],[253,9,253,75,1],[257,9,257,40,1],[258,5,258,6,1],[265,5,265,6,1],[266,9,266,60,1],[268,9,268,62,1],[270,9,270,60,1],[272,9,272,55,1],[274,9,274,40,1],[275,5,275,6,1],[282,5,282,6,1],[283,9,283,59,1],[285,9,285,75,1],[289,9,289,40,1],[290,5,290,6,1],[297,5,297,6,1],[298,9,298,58,1],[300,9,300,75,1],[304,9,304,40,1],[305,5,305,6,1],[312,5,312,6,1],[313,9,313,92,1],[315,9,315,66,1],[319,9,319,40,1],[320,5,320,6,1],[327,5,327,6,1],[328,9,328,41,1],[330,9,330,66,1],[334,9,334,40,1],[335,5,335,6,1],[343,5,343,6,1],[344,9,344,42,1],[346,9,346,66,1],[350,9,350,40,1],[351,5,351,6,1],[358,5,358,6,1],[359,9,359,91,1],[361,9,361,66,1],[365,9,365,40,1],[366,5,366,6,1]]);
    </script>
  </body>
</html>